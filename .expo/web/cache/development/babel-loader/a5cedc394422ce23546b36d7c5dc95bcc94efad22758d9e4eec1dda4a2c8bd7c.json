{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport jwt from \"jwt-decode\";\nexport function SalvarJWT(_x) {\n  return _SalvarJWT.apply(this, arguments);\n}\nfunction _SalvarJWT() {\n  _SalvarJWT = _asyncToGenerator(function* (jwtData) {\n    var userData = jwt(jwtData);\n    yield AsyncStorage.setItem(\"@jwt\", jwtData);\n    yield AsyncStorage.setItem(\"@userData\", JSON.stringify(userData));\n  });\n  return _SalvarJWT.apply(this, arguments);\n}\nexport function HeaderRequisicao() {\n  return _HeaderRequisicao.apply(this, arguments);\n}\nfunction _HeaderRequisicao() {\n  _HeaderRequisicao = _asyncToGenerator(function* () {\n    var usuarioLogado = yield ChecarLoginUsuario();\n    if (usuarioLogado == false) {\n      Navegar('Login');\n    }\n    var token = yield AsyncStorage.getItem(\"@jwt\");\n    return new Headers({\n      Authorization: \"Bearer \" + token,\n      \"Content-Type\": \"application/json\"\n    });\n  });\n  return _HeaderRequisicao.apply(this, arguments);\n}\nexport function ChecarLoginUsuario() {\n  return _ChecarLoginUsuario.apply(this, arguments);\n}\nfunction _ChecarLoginUsuario() {\n  _ChecarLoginUsuario = _asyncToGenerator(function* () {\n    var token = yield AsyncStorage.getItem(\"@jwt\");\n    if (!token) {\n      return false;\n    }\n    var userData = JSON.parse(yield AsyncStorage.getItem(\"@userData\"));\n    var actualDate = Date.parse(new Date()) / 1000;\n    if (actualDate > userData.exp) {\n      yield AsyncStorage.remove(\"@jwt\");\n      return false;\n    }\n    return true;\n  });\n  return _ChecarLoginUsuario.apply(this, arguments);\n}","map":{"version":3,"names":["AsyncStorage","jwt","SalvarJWT","_x","_SalvarJWT","apply","arguments","_asyncToGenerator","jwtData","userData","setItem","JSON","stringify","HeaderRequisicao","_HeaderRequisicao","usuarioLogado","ChecarLoginUsuario","Navegar","token","getItem","Headers","Authorization","_ChecarLoginUsuario","parse","actualDate","Date","exp","remove"],"sources":["C:/Users/luizf/Desktop/App_Cuidadores2/src/AuthContext.js"],"sourcesContent":["import AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport jwt from \"jwt-decode\";\n\nexport async function SalvarJWT(jwtData) {\n  const userData = jwt(jwtData);\n\n  await AsyncStorage.setItem(\"@jwt\", jwtData);\n  await AsyncStorage.setItem(\"@userData\", JSON.stringify(userData));\n}\n\nexport async function HeaderRequisicao() {\nconst usuarioLogado = await ChecarLoginUsuario();\n\nif(usuarioLogado==false){\n  Navegar('Login')\n}\n\n  const token = await AsyncStorage.getItem(\"@jwt\");\n  return new Headers({\n    Authorization: \"Bearer \" + token,\n    \"Content-Type\": \"application/json\",\n  });\n}\n\nexport async function ChecarLoginUsuario() {\n    \n  const token = await AsyncStorage.getItem(\"@jwt\");\n  if (!token) {\n    return false;\n  }\n\n  const userData = JSON.parse(await AsyncStorage.getItem(\"@userData\"));\n  const actualDate = Date.parse(new Date()) / 1000;\n\n  if (actualDate > userData.exp) {\n    //usuario expirado\n    await AsyncStorage.remove(\"@jwt\");\n    return false;\n  }\n\n  return true;\n}\n"],"mappings":";AAAA,OAAOA,YAAY,MAAM,2CAA2C;AACpE,OAAOC,GAAG,MAAM,YAAY;AAE5B,gBAAsBC,SAASA,CAAAC,EAAA;EAAA,OAAAC,UAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAK9B,SAAAF,WAAA;EAAAA,UAAA,GAAAG,iBAAA,CALM,WAAyBC,OAAO,EAAE;IACvC,IAAMC,QAAQ,GAAGR,GAAG,CAACO,OAAO,CAAC;IAE7B,MAAMR,YAAY,CAACU,OAAO,CAAC,MAAM,EAAEF,OAAO,CAAC;IAC3C,MAAMR,YAAY,CAACU,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAACH,QAAQ,CAAC,CAAC;EACnE,CAAC;EAAA,OAAAL,UAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAED,gBAAsBO,gBAAgBA,CAAA;EAAA,OAAAC,iBAAA,CAAAT,KAAA,OAAAC,SAAA;AAAA;AAYrC,SAAAQ,kBAAA;EAAAA,iBAAA,GAAAP,iBAAA,CAZM,aAAkC;IACzC,IAAMQ,aAAa,SAASC,kBAAkB,EAAE;IAEhD,IAAGD,aAAa,IAAE,KAAK,EAAC;MACtBE,OAAO,CAAC,OAAO,CAAC;IAClB;IAEE,IAAMC,KAAK,SAASlB,YAAY,CAACmB,OAAO,CAAC,MAAM,CAAC;IAChD,OAAO,IAAIC,OAAO,CAAC;MACjBC,aAAa,EAAE,SAAS,GAAGH,KAAK;MAChC,cAAc,EAAE;IAClB,CAAC,CAAC;EACJ,CAAC;EAAA,OAAAJ,iBAAA,CAAAT,KAAA,OAAAC,SAAA;AAAA;AAED,gBAAsBU,kBAAkBA,CAAA;EAAA,OAAAM,mBAAA,CAAAjB,KAAA,OAAAC,SAAA;AAAA;AAiBvC,SAAAgB,oBAAA;EAAAA,mBAAA,GAAAf,iBAAA,CAjBM,aAAoC;IAEzC,IAAMW,KAAK,SAASlB,YAAY,CAACmB,OAAO,CAAC,MAAM,CAAC;IAChD,IAAI,CAACD,KAAK,EAAE;MACV,OAAO,KAAK;IACd;IAEA,IAAMT,QAAQ,GAAGE,IAAI,CAACY,KAAK,OAAOvB,YAAY,CAACmB,OAAO,CAAC,WAAW,CAAC,CAAC;IACpE,IAAMK,UAAU,GAAGC,IAAI,CAACF,KAAK,CAAC,IAAIE,IAAI,EAAE,CAAC,GAAG,IAAI;IAEhD,IAAID,UAAU,GAAGf,QAAQ,CAACiB,GAAG,EAAE;MAE7B,MAAM1B,YAAY,CAAC2B,MAAM,CAAC,MAAM,CAAC;MACjC,OAAO,KAAK;IACd;IAEA,OAAO,IAAI;EACb,CAAC;EAAA,OAAAL,mBAAA,CAAAjB,KAAA,OAAAC,SAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}